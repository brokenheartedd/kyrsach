-- Машины без изменений
CREATE TABLE CAR (
    CAR_ID INTEGER PRIMARY KEY,
    MODEL VARCHAR(50),
    REGISTRATION_NUMBER VARCHAR(15) UNIQUE,
    YEAR_OF_PRODUCTION INTEGER
);

-- Водители, теперь с привязкой к машине
CREATE TABLE DRIVER (
    DRIVER_ID INTEGER PRIMARY KEY,
    FULL_NAME VARCHAR(100),
    LICENSE_NUMBER VARCHAR(20) UNIQUE,
    PHONE_NUMBER VARCHAR(15),
    EXPERIENCE_YEARS INTEGER,
    CAR_ID INTEGER,
    FOREIGN KEY (CAR_ID) REFERENCES CAR(CAR_ID)
);

-- Тарифы
CREATE TABLE TARIFF (
    TARIFF_ID INTEGER PRIMARY KEY,
    NAME VARCHAR(50),
    PRICE_PER_KM DECIMAL(10, 2),
    START_FEE DECIMAL(10, 2)
);

CREATE TABLE ORDERTABLE (
    ORDER_ID INTEGER PRIMARY KEY,
    ORDER_DATE DATE,
    CLIENT_PHONE VARCHAR(15),
    DRIVER_ID INTEGER,
    TARIFF_ID INTEGER,
    DISTANCE_KM DECIMAL(10, 2),
    FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER(DRIVER_ID),
    FOREIGN KEY (TARIFF_ID) REFERENCES TARIFF(TARIFF_ID)
);

-- Оплаты
CREATE TABLE PAYMENT (
    PAYMENT_ID INTEGER PRIMARY KEY,
    ORDER_ID INTEGER,
    PAYMENT_DATE DATE,
    AMOUNT DECIMAL(10, 2),
    PAYMENT_METHOD VARCHAR(20),
    FOREIGN KEY (ORDER_ID) REFERENCES ORDERTABLE(ORDER_ID)
);




