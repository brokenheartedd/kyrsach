CREATE TABLE DRIVER (
    ID INTEGER NOT NULL,
    FULL_NAME VARCHAR(100),
    LICENSE_NUMBER VARCHAR(20),
    PHONE_NUMBER VARCHAR(15),
    EXPERIENCE_YEARS INTEGER,
    CONSTRAINT INTEG_18 UNIQUE (LICENSE_NUMBER)
USING ASCENDING INDEX RDB$11,
    CONSTRAINT PK_DRIVER PRIMARY KEY (ID)
USING ASCENDING INDEX IDX_PK_DRIVER);

CREATE TABLE CAR (
    ID INTEGER NOT NULL,
    MODEL VARCHAR(100),
    LICENSE_PLATE VARCHAR(20),
    DRIVER_ID INTEGER,
    TARIFF_ID INTEGER,
    CONSTRAINT FK_CAR_DRIVER FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER (ID)
USING ASCENDING INDEX IDX_FK_CAR_DRIVER,
    CONSTRAINT FK_CAR_TARIFF FOREIGN KEY (TARIFF_ID) REFERENCES TARIFF (ID)
USING ASCENDING INDEX IDX_FK_CAR_TARIFF,
    CONSTRAINT PK_CAR PRIMARY KEY (ID)
USING ASCENDING INDEX IDX_PK_CAR);


CREATE TABLE ORDERTABLE (
    ID INTEGER NOT NULL,
    CLIENT_NAME VARCHAR(100),
    PHONE VARCHAR(20),
    DRIVER_ID INTEGER,
    TARIFF_ID INTEGER,
    ORDER_DATE DATE,
    DISTANCE FLOAT,
    CONSTRAINT FK_ORDER_DRIVER FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER (ID)
USING ASCENDING INDEX IDX_FK_ORDER_DRIVER,
    CONSTRAINT FK_ORDER_TARIFF FOREIGN KEY (TARIFF_ID) REFERENCES TARIFF (ID)
USING ASCENDING INDEX IDX_FK_ORDER_TARIFF,
    CONSTRAINT PK_ORDER PRIMARY KEY (ID)
USING ASCENDING INDEX IDX_PK_ORDER);


CREATE TABLE PAYMENT (
    ID INTEGER NOT NULL,
    ORDER_ID INTEGER,
    AMOUNT FLOAT,
    PAID_DATE DATE,
    PAYMENT_STATUS VARCHAR(12) DEFAULT 'Не оплачено',
    CONSTRAINT FK_PAYMENT_ORDER FOREIGN KEY (ORDER_ID) REFERENCES ORDERTABLE (ID)
USING ASCENDING INDEX IDX_FK_PAYMENT_ORDER,
    CONSTRAINT PK_PAYMENT PRIMARY KEY (ID)
USING ASCENDING INDEX IDX_PK_PAYMENT);


CREATE TABLE PAYMENT_DETAILS (
    ID INTEGER NOT NULL,
    ORDER_ID INTEGER NOT NULL,
    PAYMENT_METHOD VARCHAR(50),
    TRANSACTION_NUMBER VARCHAR(100),
    PAYMENT_DATE DATE,
    CONSTRAINT INTEG_24 PRIMARY KEY (ID)
USING ASCENDING INDEX RDB$PRIMARY12,
    CONSTRAINT INTEG_26 FOREIGN KEY (ORDER_ID) REFERENCES ORDERTABLE (ID)
USING ASCENDING INDEX RDB$FOREIGN13);


CREATE TABLE TARIFF (
    ID INTEGER NOT NULL,
    NAME VARCHAR(50),
    PRICE_PER_KM FLOAT,
    CONSTRAINT PK_TARIFF PRIMARY KEY (ID)
USING ASCENDING INDEX IDX_PK_TARIFF);
